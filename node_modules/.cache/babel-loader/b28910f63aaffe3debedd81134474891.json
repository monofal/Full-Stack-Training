{"ast":null,"code":"import _defineProperty from \"/home/nofal/Desktop/Training/react/react-redux-login-registration-example/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/nofal/Desktop/Training/react/react-redux-login-registration-example/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/nofal/Desktop/Training/react/react-redux-login-registration-example/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/nofal/Desktop/Training/react/react-redux-login-registration-example/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/nofal/Desktop/Training/react/react-redux-login-registration-example/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/nofal/Desktop/Training/react/react-redux-login-registration-example/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/nofal/Desktop/Training/react/react-redux-login-registration-example/src/pages/Login.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { Button, Form, Grid, Header, Image, Message, Segment, Loader } from 'semantic-ui-react';\nimport validateInput from '../validators/login';\nimport { loginUser } from '../store/actions/auth';\n\nvar LoginForm =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(LoginForm, _Component);\n\n  function LoginForm(props) {\n    var _this;\n\n    _classCallCheck(this, LoginForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LoginForm).call(this, props));\n\n    _this.onSubmit = function (e) {\n      e.preventDefault();\n\n      if (_this.isValid()) {\n        _this.setState({\n          errors: {},\n          isLoading: true\n        });\n\n        _this.props.loginUser(_this.state, _this.props.history);\n      }\n    };\n\n    _this.onChange = function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    };\n\n    _this.isValid = function () {\n      var _validateInput = validateInput(_this.state),\n          errors = _validateInput.errors,\n          isValid = _validateInput.isValid;\n\n      if (!isValid) {\n        _this.setState({\n          errors: errors\n        });\n      }\n\n      return isValid;\n    };\n\n    _this.state = {\n      email: '',\n      password: '',\n      errors: {},\n      isLoading: false\n    };\n    return _this;\n  }\n\n  _createClass(LoginForm, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.user.isAuthenticated) {\n        this.props.history.push('/');\n      }\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (nextProps.user && nextProps.user.isAuthenticated) {\n        this.props.history.push('/');\n      }\n\n      if (nextProps.errors) {\n        this.setState({\n          errors: nextProps.errors,\n          isLoading: false\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          errors = _this$state.errors,\n          email = _this$state.email,\n          password = _this$state.password,\n          isLoading = _this$state.isLoading;\n      return React.createElement(\"div\", {\n        class: \"col-lg-6 offset-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        class: \"heading\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, \"Login\"), React.createElement(\"form\", {\n        action: \"\",\n        method: \"post\",\n        onSubmit: this.onSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        for: \"email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, \"Email\"), React.createElement(\"input\", {\n        type: \"email\",\n        class: \"form-control\",\n        name: \"email\",\n        id: \"email\",\n        placeholder: \"Email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        for: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, \"Password\"), React.createElement(\"input\", {\n        type: \"password\",\n        class: \"form-control\",\n        name: \"password\",\n        id: \"password\",\n        placeholder: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"submit\",\n        class: \"btn btn-outline-white-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        class: \"fa fa-sign-in\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }), \" Log in\"))), \"Don't have an account? \", React.createElement(\"a\", {\n        href: \"/register\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, \"Sign up!\"))) // <div className='login-form'>\n      //   <Grid textAlign='center' style={{ height: '100%' }} verticalAlign='middle'>\n      //     <Grid.Column style={{ maxWidth: 450 }}>\n      //       <Link to='/'>\n      //         <Image src='/assets/images/logo.png' size='tiny' centered />\n      //       </Link>\n      //       <Header as='h2' color='teal' textAlign='center'>\n      //         Login\n      //       </Header>\n      //       <Form size='large'\n      //         onSubmit={this.onSubmit}\n      //         error={errors.loginError ? true : false}\n      //         autoComplete='off'\n      //       >\n      //         <Segment stacked>\n      //           <Form.Input\n      //             fluid icon='user'\n      //             iconPosition='left'\n      //             name='email'\n      //             placeholder='E-mail'\n      //             defaultValue={email}\n      //             error={errors.email ? true : false}\n      //             onChange={this.onChange}\n      //           />\n      //           <Form.Input\n      //             fluid icon='lock'\n      //             iconPosition='left'\n      //             name='password'\n      //             placeholder='Password'\n      //             type='password'\n      //             defaultValue={password}\n      //             error={errors.password ? true : false}\n      //             onChange={this.onChange}\n      //           />\n      //           <Message error content={errors.loginError} />\n      //           <Button color='teal' fluid size='large' disabled={isLoading}>\n      //             {!isLoading\n      //               ? 'Login'\n      //               : <Loader active inverted inline size='small' />\n      //             }\n      //           </Button>\n      //         </Segment>\n      //       </Form>\n      //       <Message>\n      //         Don't have an account? <Link to='/register'>Sign up!</Link>\n      //       </Message>\n      //     </Grid.Column>\n      //   </Grid>\n      // </div>\n      ;\n    }\n  }]);\n\n  return LoginForm;\n}(Component);\n\nLoginForm.propTypes = {\n  errors: PropTypes.object.isRequired\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    user: state.user,\n    errors: state.errors\n  };\n};\n\nexport default connect(mapStateToProps, {\n  loginUser: loginUser\n})(LoginForm);","map":{"version":3,"sources":["/home/nofal/Desktop/Training/react/react-redux-login-registration-example/src/pages/Login.js"],"names":["React","Component","Link","connect","PropTypes","Button","Form","Grid","Header","Image","Message","Segment","Loader","validateInput","loginUser","LoginForm","props","onSubmit","e","preventDefault","isValid","setState","errors","isLoading","state","history","onChange","target","name","value","email","password","user","isAuthenticated","push","nextProps","propTypes","object","isRequired","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport {\n  Button, Form, Grid, Header, Image, Message, Segment,\n  Loader\n} from 'semantic-ui-react'\n\nimport validateInput from '../validators/login';\nimport { loginUser } from '../store/actions/auth';\n\nclass LoginForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: '',\n      password: '',\n      errors: {},\n      isLoading: false\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.user.isAuthenticated) {\n      this.props.history.push('/');\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.user && nextProps.user.isAuthenticated) {\n      this.props.history.push('/');\n    }\n    if (nextProps.errors) {\n      this.setState({\n        errors: nextProps.errors,\n        isLoading: false\n      });\n    }\n  }\n\n  onSubmit = (e) => {\n    e.preventDefault();\n    if (this.isValid()) {\n      this.setState({ errors: {}, isLoading: true });\n      this.props.loginUser(this.state, this.props.history);\n    }\n  }\n\n  onChange = (e) => {\n    this.setState({ [e.target.name]: e.target.value });\n  }\n\n  isValid = () => {\n    const { errors, isValid } = validateInput(this.state);\n    if (!isValid) {\n      this.setState({ errors });\n    }\n    return isValid;\n  }\n\n  render() {\n    const { errors, email, password, isLoading } = this.state;\n\n    return (\n\n      <div class=\"col-lg-6 offset-3\">\n        <div class=\"box\">\n          <h3 class=\"heading\">Login</h3>\n          <form action=\"\" method=\"post\" onSubmit={this.onSubmit}>\n            <div class=\"form-group\">\n              <label for=\"email\">Email</label>\n              <input type=\"email\"\n                class=\"form-control\"\n                name=\"email\"\n                id=\"email\"\n                placeholder=\"Email\" />\n            </div>\n            <div class=\"form-group\">\n              <label for=\"password\">Password</label>\n              <input type=\"password\"\n                class=\"form-control\"\n                name=\"password\"\n                id=\"password\"\n                placeholder=\"password\" />\n            </div>\n            <div class=\"text-center\">\n              <button type=\"submit\" class=\"btn btn-outline-white-primary\">\n                <i class=\"fa fa-sign-in\"></i> Log in\n          </button>\n            </div>\n          </form>\n          Don't have an account? <a href='/register'>Sign up!</a>\n        </div>\n      </div>\n\n\n      // <div className='login-form'>\n      //   <Grid textAlign='center' style={{ height: '100%' }} verticalAlign='middle'>\n      //     <Grid.Column style={{ maxWidth: 450 }}>\n      //       <Link to='/'>\n      //         <Image src='/assets/images/logo.png' size='tiny' centered />\n      //       </Link>\n\n      //       <Header as='h2' color='teal' textAlign='center'>\n      //         Login\n      //       </Header>\n      //       <Form size='large'\n      //         onSubmit={this.onSubmit}\n      //         error={errors.loginError ? true : false}\n      //         autoComplete='off'\n      //       >\n      //         <Segment stacked>\n      //           <Form.Input\n      //             fluid icon='user'\n      //             iconPosition='left'\n      //             name='email'\n      //             placeholder='E-mail'\n      //             defaultValue={email}\n      //             error={errors.email ? true : false}\n      //             onChange={this.onChange}\n      //           />\n      //           <Form.Input\n      //             fluid icon='lock'\n      //             iconPosition='left'\n      //             name='password'\n      //             placeholder='Password'\n      //             type='password'\n      //             defaultValue={password}\n      //             error={errors.password ? true : false}\n      //             onChange={this.onChange}\n      //           />\n\n      //           <Message error content={errors.loginError} />\n\n      //           <Button color='teal' fluid size='large' disabled={isLoading}>\n      //             {!isLoading\n      //               ? 'Login'\n      //               : <Loader active inverted inline size='small' />\n      //             }\n      //           </Button>\n      //         </Segment>\n      //       </Form>\n      //       <Message>\n      //         Don't have an account? <Link to='/register'>Sign up!</Link>\n      //       </Message>\n      //     </Grid.Column>\n      //   </Grid>\n      // </div>\n    )\n  }\n}\n\nLoginForm.propTypes = {\n  errors: PropTypes.object.isRequired\n}\n\nconst mapStateToProps = state => ({\n  user: state.user,\n  errors: state.errors\n})\n\nexport default connect(mapStateToProps, { loginUser })(LoginForm)\n"]},"metadata":{},"sourceType":"module"}