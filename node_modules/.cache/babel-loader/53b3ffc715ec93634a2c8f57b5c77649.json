{"ast":null,"code":"import AuthService from '../../services/AuthService';\nimport { setCurrentUser, registerSuccess, logoutUser, getErrors } from \"./actionCreators\";\n/**\n * Login user action\n */\n\nexport var loginUser = function loginUser(state, history) {\n  return function (dispatch) {\n    AuthService.login(state.email, state.password).then(function (resp) {\n      if (resp) {\n        dispatch(setCurrentUser(resp.user));\n        AuthService.saveToken(resp.token);\n        history.push('/');\n      }\n    }).catch(function (error) {\n      if (error.response.data) {\n        dispatch(getErrors({\n          loginError: error.response.data.error\n        }));\n      }\n    });\n  };\n};\n/**\n * Logout action\n */\n\nexport var logout = function logout(history) {\n  return function (dispatch) {\n    AuthService.logout();\n    dispatch(logoutUser());\n    history.push('/');\n    window.location.reload();\n  };\n};\n/**\n * Register user action\n */\n\nexport var registerUser = function registerUser(data, history) {\n  return function (dispatch) {\n    AuthService.register(data).then(function (resp) {\n      if (resp.data.success) {\n        dispatch(registerSuccess());\n        history.push('/login');\n      }\n    }).catch(function (error) {\n      if (error.response.data) {\n        dispatch(getErrors({\n          registerError: error.response.data.error\n        }));\n      }\n    });\n  };\n};","map":{"version":3,"sources":["/home/nofal/Desktop/Training/react/react-redux-login-registration-example/src/store/actions/auth.js"],"names":["AuthService","setCurrentUser","registerSuccess","logoutUser","getErrors","loginUser","state","history","dispatch","login","email","password","then","resp","user","saveToken","token","push","catch","error","response","data","loginError","logout","window","location","reload","registerUser","register","success","registerError"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,4BAAxB;AACA,SAASC,cAAT,EAAyBC,eAAzB,EAA0CC,UAA1C,EAAsDC,SAAtD,QAAuE,kBAAvE;AAEA;;;;AAGA,OAAO,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAACC,KAAD,EAAQC,OAAR;AAAA,SAAoB,UAAAC,QAAQ,EAAI;AACvDR,IAAAA,WAAW,CAACS,KAAZ,CAAkBH,KAAK,CAACI,KAAxB,EAA+BJ,KAAK,CAACK,QAArC,EAA+CC,IAA/C,CAAoD,UAAAC,IAAI,EAAI;AAC1D,UAAIA,IAAJ,EAAU;AACRL,QAAAA,QAAQ,CAACP,cAAc,CAACY,IAAI,CAACC,IAAN,CAAf,CAAR;AACAd,QAAAA,WAAW,CAACe,SAAZ,CAAsBF,IAAI,CAACG,KAA3B;AACAT,QAAAA,OAAO,CAACU,IAAR,CAAa,GAAb;AACD;AACF,KAND,EAMGC,KANH,CAMS,UAAAC,KAAK,EAAI;AAChB,UAAIA,KAAK,CAACC,QAAN,CAAeC,IAAnB,EAAyB;AACvBb,QAAAA,QAAQ,CAACJ,SAAS,CAAC;AACjBkB,UAAAA,UAAU,EAAEH,KAAK,CAACC,QAAN,CAAeC,IAAf,CAAoBF;AADf,SAAD,CAAV,CAAR;AAGD;AACF,KAZD;AAaD,GAdwB;AAAA,CAAlB;AAgBP;;;;AAGA,OAAO,IAAMI,MAAM,GAAG,SAATA,MAAS,CAAChB,OAAD;AAAA,SAAa,UAAAC,QAAQ,EAAI;AAC7CR,IAAAA,WAAW,CAACuB,MAAZ;AACAf,IAAAA,QAAQ,CAACL,UAAU,EAAX,CAAR;AACAI,IAAAA,OAAO,CAACU,IAAR,CAAa,GAAb;AACAO,IAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACD,GALqB;AAAA,CAAf;AAOP;;;;AAGA,OAAO,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACN,IAAD,EAAOd,OAAP;AAAA,SAAmB,UAAAC,QAAQ,EAAI;AACzDR,IAAAA,WAAW,CAAC4B,QAAZ,CAAqBP,IAArB,EAA2BT,IAA3B,CAAgC,UAAAC,IAAI,EAAI;AACtC,UAAIA,IAAI,CAACQ,IAAL,CAAUQ,OAAd,EAAuB;AACrBrB,QAAAA,QAAQ,CAACN,eAAe,EAAhB,CAAR;AACAK,QAAAA,OAAO,CAACU,IAAR,CAAa,QAAb;AACD;AACF,KALD,EAKGC,KALH,CAKS,UAAAC,KAAK,EAAI;AAChB,UAAIA,KAAK,CAACC,QAAN,CAAeC,IAAnB,EAAyB;AACvBb,QAAAA,QAAQ,CAACJ,SAAS,CAAC;AACjB0B,UAAAA,aAAa,EAAEX,KAAK,CAACC,QAAN,CAAeC,IAAf,CAAoBF;AADlB,SAAD,CAAV,CAAR;AAGD;AACF,KAXD;AAYD,GAb2B;AAAA,CAArB","sourcesContent":["import AuthService from '../../services/AuthService';\nimport { setCurrentUser, registerSuccess, logoutUser, getErrors } from \"./actionCreators\";\n\n/**\n * Login user action\n */\nexport const loginUser = (state, history) => dispatch => {\n  AuthService.login(state.email, state.password).then(resp => {\n    if (resp) {\n      dispatch(setCurrentUser(resp.user));\n      AuthService.saveToken(resp.token);\n      history.push('/');\n    }\n  }).catch(error => {\n    if (error.response.data) {\n      dispatch(getErrors({\n        loginError: error.response.data.error\n      }));\n    }\n  });\n}\n\n/**\n * Logout action\n */\nexport const logout = (history) => dispatch => {\n  AuthService.logout();\n  dispatch(logoutUser());\n  history.push('/')\n  window.location.reload();\n}\n\n/**\n * Register user action\n */\nexport const registerUser = (data, history) => dispatch => {\n  AuthService.register(data).then(resp => {\n    if (resp.data.success) {\n      dispatch(registerSuccess());\n      history.push('/login');\n    }\n  }).catch(error => {\n    if (error.response.data) {\n      dispatch(getErrors({\n        registerError: error.response.data.error\n      }));\n    }\n  });\n}\n"]},"metadata":{},"sourceType":"module"}