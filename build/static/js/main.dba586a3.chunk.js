(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{218:function(e,t,a){e.exports=a(438)},437:function(e,t,a){},438:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(38),i=a.n(o),s=a(26),l=a(46),c=a(188),u="SET_CURRENT_USER",m="LOGOUT",d="REGISTER_SUCCESS",p="GET_ERRORS",f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return{isAuthenticated:!0,profile:t.payload};case m:return{isAuthenticated:!1,profile:{}};default:return e}},h=Object(l.c)({user:f,errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return t.payload;default:return e}}}),g=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d;var E=a(21),b=a(41),v=a(42),y=a(44),O=a(43),w=a(45),j=a(52),C=a(455),S=a(445),k=a(451),P=a(448),A=a(98),L=a.n(A),N="http://127.0.0.1:8000/api",I={login:function(e,t){return L.a.post(N+"/auth/",{email:e,password:t})},register:function(e){return L.a.post(N+"/register",{data:e})},getProfile:function(){return L.a.get(N+"/current/",{headers:this.authHeader()})},logout:function(){localStorage.removeItem("token")},getToken:function(){return localStorage.getItem("token")},saveToken:function(e){localStorage.setItem("token",e)},authHeader:function(){return{Authorization:"Token ".concat(this.getToken())}}};function V(e){return{type:u,payload:e}}function T(e){return{type:p,payload:e}}var R=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(y.a)(this,Object(O.a)(t).call(this,e))).logout=function(){return a.props.logout(a.props.history)},a.state={},a}return Object(w.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.user;return r.a.createElement("div",null,r.a.createElement(k.a,{className:"top"},r.a.createElement(S.a,null,r.a.createElement(k.a.Item,{as:E.b,to:"/"},"Home"),r.a.createElement(k.a.Item,{as:E.b,to:"/about"},"About"),a.isAuthenticated?r.a.createElement(k.a.Menu,{position:"right"},r.a.createElement(P.a,{item:!0,text:"My Account"},r.a.createElement(P.a.Menu,null,r.a.createElement(P.a.Header,{icon:"user",content:a.email}),r.a.createElement(P.a.Divider,null),r.a.createElement(P.a.Item,{as:E.b,to:"/profile"},"Profile"),r.a.createElement(P.a.Item,{onClick:this.logout},"Logout")))):r.a.createElement(k.a.Menu,{position:"right"},r.a.createElement(k.a.Item,{as:E.b,to:"/login"},"Login"),r.a.createElement(k.a.Item,{as:E.b,to:"/sign-up"},"Sign up")))),t)}}]),t}(n.Component),_=Object(s.b)(function(e){return{user:e.user}},{logout:function(e){return function(t){I.logout(),t({type:m}),e.push("/"),window.location.reload()}}})(Object(j.f)(R)),x=function(e){var t=e.children;return r.a.createElement(_,null,r.a.createElement(C.a,{vertical:!0},r.a.createElement(S.a,null,t)))},z=function(){return r.a.createElement(x,null,r.a.createElement("h1",null,"Home Page"))},U=function(){return r.a.createElement(x,null,r.a.createElement("h1",null,"About Page"))},D=a(96),M=a(453),H=a(206),W=a(452),G=a(447),q=a(449),J=a(450),X=a(446),F=a(40),B=a.n(F),K=a(33),Q=a.n(K),Y="This field is required";var Z=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(y.a)(this,Object(O.a)(t).call(this,e))).onSubmit=function(e){e.preventDefault(),a.isValid()&&(a.setState({errors:{},isLoading:!0}),a.props.loginUser(a.state,a.props.history))},a.onChange=function(e){a.setState(Object(D.a)({},e.target.name,e.target.value))},a.isValid=function(){var e=function(e){var t={};return B.a.isEmpty(e.email)&&(t.email=Y),B.a.isEmpty(e.password)&&(t.password=Y),{errors:t,isValid:Q()(t)}}(a.state),t=e.errors,n=e.isValid;return n||a.setState({errors:t}),n},a.state={email:"",password:"",errors:{},isLoading:!1},a}return Object(w.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){this.props.user.isAuthenticated&&this.props.history.push("/")}},{key:"componentWillReceiveProps",value:function(e){e.user&&e.user.isAuthenticated&&this.props.history.push("/"),e.errors&&this.setState({errors:e.errors,isLoading:!1})}},{key:"render",value:function(){var e=this.state,t=e.errors,a=e.email,n=e.password,o=e.isLoading;return r.a.createElement("div",{className:"login-form"},r.a.createElement(M.a,{textAlign:"center",style:{height:"100%"},verticalAlign:"middle"},r.a.createElement(M.a.Column,{style:{maxWidth:450}},r.a.createElement(E.b,{to:"/"},r.a.createElement(H.a,{src:"/assets/images/logo.png",size:"tiny",centered:!0})),r.a.createElement(W.a,{as:"h2",color:"teal",textAlign:"center"},"Login"),r.a.createElement(G.a,{size:"large",onSubmit:this.onSubmit,error:!!t.loginError,autoComplete:"off"},r.a.createElement(C.a,{stacked:!0},r.a.createElement(G.a.Input,{fluid:!0,icon:"user",iconPosition:"left",name:"email",placeholder:"E-mail",defaultValue:a,error:!!t.email,onChange:this.onChange}),r.a.createElement(G.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",name:"password",placeholder:"Password",type:"password",defaultValue:n,error:!!t.password,onChange:this.onChange}),r.a.createElement(q.a,{error:!0,content:t.loginError}),r.a.createElement(J.a,{color:"teal",fluid:!0,size:"large",disabled:o},o?r.a.createElement(X.a,{active:!0,inverted:!0,inline:!0,size:"small"}):"Login"))),r.a.createElement(q.a,null,"Don't have an account? ",r.a.createElement(E.b,{to:"/sign-up"},"Sign up!")))))}}]),t}(n.Component),$=Object(s.b)(function(e){return{user:e.user,errors:e.errors}},{loginUser:function(e,t){return function(a){I.login(e.email,e.password).then(function(e){200==e.status&&(a(V(e.data.user)),I.saveToken(e.data.token),t.push("/"))}).catch(function(e){e.response.data&&a(T({loginError:e.response.data.error}))})}}})(Z);var ee=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(y.a)(this,Object(O.a)(t).call(this,e))).onSubmit=function(e){e.preventDefault(),a.isValid()&&(a.setState({errors:{},isLoading:!0}),a.props.registerUser(a.state,a.props.history))},a.onChange=function(e){a.setState(Object(D.a)({},e.target.name,e.target.value))},a.isValid=function(){var e=function(e){var t={};return B.a.isEmpty(e.firstName)&&(t.firstName=Y),B.a.isEmpty(e.lastName)&&(t.lastName=Y),B.a.isEmpty(e.email)&&(t.email=Y),B.a.isEmpty(e.password)&&(t.password=Y),B.a.isEmpty(e.confirmPassword)&&(t.confirmPassword=Y),{errors:t,isValid:Q()(t)}}(a.state),t=e.errors,n=e.isValid;return n||a.setState({errors:t}),n},a.state={firstName:"",lastName:"",email:"",password:"",confirmPassword:"",errors:{},isLoading:!1},a}return Object(w.a)(t,e),Object(v.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors,isLoading:!1})}},{key:"render",value:function(){var e=this.state,t=e.firstName,a=e.lastName,n=e.email,o=e.password,i=e.confirmPassword,s=e.errors,l=e.isLoading;return r.a.createElement("div",{className:"register-form"},r.a.createElement(M.a,{textAlign:"center",style:{height:"100%"},verticalAlign:"middle"},r.a.createElement(M.a.Column,{style:{maxWidth:450}},r.a.createElement(E.b,{to:"/"},r.a.createElement(H.a,{src:"/assets/images/logo.png",size:"tiny",centered:!0})),r.a.createElement(W.a,{as:"h2",color:"teal",textAlign:"center"},"Create Account"),r.a.createElement(G.a,{size:"large",onSubmit:this.onSubmit},r.a.createElement(C.a,{stacked:!0},r.a.createElement(G.a.Input,{fluid:!0,placeholder:"First Name",name:"firstName",defaultValue:t,error:!!s.firstName,onChange:this.onChange}),r.a.createElement(G.a.Input,{fluid:!0,placeholder:"Last Name",name:"lastName",defaultValue:a,error:!!s.lastName,onChange:this.onChange}),r.a.createElement(G.a.Input,{fluid:!0,placeholder:"E-mail",name:"email",defaultValue:n,error:!!s.email,onChange:this.onChange}),r.a.createElement(G.a.Input,{fluid:!0,placeholder:"Password",name:"password",type:"password",defaultValue:o,error:!!s.password,onChange:this.onChange}),r.a.createElement(G.a.Input,{fluid:!0,placeholder:"Confirm Password",name:"confirmPassword",type:"password",defaultValue:i,error:!!s.confirmPassword,onChange:this.onChange}),r.a.createElement(J.a,{color:"teal",fluid:!0,size:"large",disabled:l},l?r.a.createElement(X.a,{active:!0,inverted:!0,inline:!0,size:"small"}):"Create Account"))),r.a.createElement(q.a,null,"Already have an account? ",r.a.createElement(E.b,{to:"/login"},"Login")))))}}]),t}(n.Component),te=Object(s.b)(function(e){return{errors:e.errors}},{registerUser:function(e,t){return function(a){I.register(e).then(function(e){200==e.status&&(a({type:d}),t.push("/login"))}).catch(function(e){e.response.data&&a(T({registerError:e.response.data.error}))})}}})(ee),ae=function(){return r.a.createElement(x,null,r.a.createElement("h1",null,"Profile Page"))},ne=a(207),re=Object(s.b)(function(e){return{user:e.user}})(function(e){var t=e.component,a=e.user,n=Object(ne.a)(e,["component","user"]);return r.a.createElement(j.b,Object.assign({},n,{render:function(e){return!0===a.isAuthenticated?r.a.createElement(t,e):r.a.createElement(j.a,{to:"/login"})}}))});var oe,ie=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(y.a)(this,Object(O.a)(t).call(this,e))).state={isLoading:!0},a}return Object(w.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.getProfile().finally(function(){e.setState({isLoading:!1})})}},{key:"render",value:function(){return this.state&&!1===this.state.isLoading?r.a.createElement("div",null,r.a.createElement(j.d,null,r.a.createElement(j.b,{exact:!0,path:"/",component:z}),r.a.createElement(j.b,{path:"/about",component:U}),r.a.createElement(j.b,{path:"/login",component:$}),r.a.createElement(j.b,{path:"/sign-up",component:te}),r.a.createElement(re,{path:"/profile",component:ae}))):r.a.createElement("div",null,"Loading..")}}]),t}(n.Component),se=Object(s.b)(null,{getProfile:function(){return function(e){return new Promise(function(t,a){I.getToken()?I.getProfile().then(function(a){a.data.user&&e(V(a.data.user)),t()}):t()})}}})(ie),le=(a(436),a(437),oe={user:{isAuthenticated:!1,profile:{}}},Object(l.e)(h,oe,g(Object(l.a)(c.a))));i.a.render(r.a.createElement(s.a,{store:le},r.a.createElement(E.a,null,r.a.createElement(se,null))),document.querySelector("#root"))}},[[218,1,2]]]);
//# sourceMappingURL=main.dba586a3.chunk.js.map